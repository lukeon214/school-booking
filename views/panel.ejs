<head>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/variables.css">
  <link rel="stylesheet" href="/global.css">
  <link rel="stylesheet" href="/layout.css">
  <link rel="stylesheet" href="/components.css">
  <link rel="stylesheet" href="/form-card.css">
</head>
<h1>Form Panel: <%= form.title %></h1>

<div class="card">
  <strong>Public Form Link:</strong><br>
  <input id="formLink" readonly value="http://localhost:3333/form/<%= form.id %>">
  <button onclick="copy()">Copy</button>
  <a href="/export/<%= form.id %>" class="form-btn">â¬‡ Export CSV</a>
</div>

<script>
function copy() {
  const input = document.getElementById('formLink');
  input.select();
  document.execCommand('copy');
  alert('Link copied!');
}
</script>

<h2>Responses</h2>
<% if (!responses.length) { %>
  <p>No responses submitted yet.</p>
<% } %>

<% responses.forEach((submission, index) => { %>
  <div class="card">
    <strong><%= submission.email %></strong><br><br>
    <% submission.fields.forEach(f => { %>
      <strong><%= f.label %>:</strong> <%= f.value %><br>
    <% }) %>
  </div>
<% }) %>